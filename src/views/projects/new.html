<div class="col-md-6 col-sm-6">
	<div class="left">
		
		<div class="header text-center">
			<a href="./#dashboard">
				<span class="header-button hb-left">
					<i class="fa fa-chevron-left"></i>
				</span>
			</a>
			<h1>{{title}}</h1>
			<br style="clear:both;" />
		</div>

		<div class="profile-image text-center">

			<div class="upload-form">
				<div class="image add-image" data-toggle="modal" data-target="#upload-modal">
					<i class="fa fa-plus"></i>
				</div>

				<div class="name">
					<div class="img-area"></div>
					<p class="title">
						Add Image
					</p>
					<p style="margin:0 auto; visibility:hidden; width:225px; font-size:16px; color:white;">
						<input id="art-upload-form" type="file" />
					</p>
				</div>
			</div>
			
			<div class="uploading-area" style="display:none;">
				<div class="spinner">
					<i class="fa fa-spinner fa-spin"></i>
				</div>

				<div class="name">
					<p class="title">
						Uploading Artwork to iACCESS <br /> Please wait.
					</p>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="col-md-6 col-sm-6">
	<div class="right">

		<div class="to-do-replace" ng-controller="NewProjectController">
			<div class="form-group">
				<select class="form-control" 
						ng-options="class.name for class in class_list track by class.name" 
						ng-model="selected">
					<option value="" ng-if="false"></option>
				</select>
			</div>

			<div class="form-group student-dropdown">
				<select class="form-control" 
						ng-options="student.name for student in student_list track by student.name" 
						ng-model="selected">
					<option value="" ng-if="false"></option>
				  </select>
			</div>

			<div class="form-group">
				<select class="project-select form-control" 
						ng-options="project.name for project in project_list track by project.id" 
						ng-model="selected">
						<option value="" ng-if="false"></option>
				  </select>
			</div>

			<div class="checkbox">
				<label>
				  <input type="checkbox"> Project Incomplete
				</label>
			</div>
		</div>

		<div class="dashboard-btns">
			<div class="text-center">

				<div class="form-group">
					<button ng-click="dashboard_redirect();" class="btn btn-secondary">
						Cancel
					</button>

					<button ng-click="upload_artwork();" class="btn btn-yellow">
						Finish
					</button>
				</div>

			</div>
		</div>

	</div>
</div>

<script type="text/javascript">
	// To style all <select>s
	
	setTimeout(function(){
		$('select').selectpicker({
			style: 'btn-select',
	  		size: 4
		});
	}, 0);

	

	$('.add-image').click(function(){
		$('input[type=file]').click();
	});

	$('input[type=file]').change( function(){
	    var file_name = $(this).val();
	    var arr = file_name.split("\\");

	    $('.profile-image div.name p.title').text(arr[arr.length - 1]);
	});

	var inputElement = document.getElementById("art-upload-form");
		inputElement.addEventListener("change", handleFiles, false);
		
	function handleFiles() {
	  var fileList = this.files;
	  upload_image(fileList[0]);
	}

	function upload_image(file) {
		$('.uploading-area').show();
		$('.upload-form').hide();

		var xhttp    = new XMLHttpRequest(),
	        fd       = new FormData();

	    fd.append('image', file);

	    xhttp.open('POST', 'https://api.imgur.com/3/image');
	    xhttp.setRequestHeader('Authorization', 'Client-ID f86db3d75c1ac53');
	    xhttp.onreadystatechange = function () {
	        if (xhttp.status === 200 && xhttp.readyState === 4) {
	            var res = JSON.parse(xhttp.responseText), link;
	            link = res.data.link;
	            console.log(link);

	            window.localStorage.setItem('temp_image', link);


	            $('.img-area').html('<img src="'+ link +'" />');
	            $('.upload-form').show();
	            $('.uploading-area').hide();
	            $('.add-image').hide();
	        }
	    };

	    xhttp.send(fd);
	}
</script>
